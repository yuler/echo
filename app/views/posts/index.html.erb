<div class="container-main">
  <%# Title bar %>
  <div class="flex items-center justify-between mb-8">
    <h1 class="text-display">Posts</h1>
  </div>

  <% if @posts.any? %>
    <%# Recent posts %>
    <div class="mb-8">
      <div class="flex items-center justify-between mb-5">
        <span class="text-overline flex-1">Recent</span>
        <div class="flex gap-2">
          <button class="posts-icon-btn posts-icon-btn-sm text-neutral-500 focus-ring" aria-label="Previous" data-action="click->carousel#prev">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
          </button>
          <button class="posts-icon-btn posts-icon-btn-sm text-neutral-500 focus-ring" aria-label="Next" data-action="click->carousel#next">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="m9 18 6-6-6-6"/></svg>
          </button>
        </div>
      </div>

      <div class="posts-carousel">
        <% @posts.limit(5).each do |post| %>
          <%= render "posts/post_card", post: post %>
        <% end %>
      </div>
    </div>

    <% if @posts.count > 5 %>
    <%# Category tabs %>
    <div class="flex gap-5 overflow-x-auto py-4 border-t border-b border-neutral-200 scrollbar-none">
      <button class="posts-tab posts-tab-active">ALL</button>
      <% all_topics = @posts.flat_map(&:topics_list).uniq.first(6) %>
      <% all_topics.each do |topic| %>
        <button class="posts-tab"><%= topic.upcase %></button>
      <% end %>
    </div>
    <% end %>
  <% else %>
    <div class="py-16 text-center" style="color: #a3a3a3">
      <p class="text-body-lg">No posts yet</p>
    </div>
  <% end %>
</div>
